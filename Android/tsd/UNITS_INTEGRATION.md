# Интеграция справочника единиц измерения

## Обзор

В мобильное приложение добавлена функциональность для работы со справочником единиц измерения. Пользователи могут загружать данные с сервера и просматривать их в офлайн режиме.

## Новые компоненты

### 1. Модель данных
- `UnitOfMeasure.kt` - модель единицы измерения с Room аннотациями

### 2. API сервис
- `UnitsApiService.kt` - Retrofit интерфейс для работы с API единиц измерения

### 3. База данных
- `TsdDatabase.kt` - Room база данных
- `UnitOfMeasureDao.kt` - DAO для работы с единицами измерения

### 4. Репозиторий
- `UnitsRepository.kt` - репозиторий для синхронизации данных между API и локальной БД

### 5. ViewModel
- `UnitsViewModel.kt` - ViewModel для управления состоянием экрана единиц измерения

### 6. UI
- `UnitsScreen.kt` - экран для отображения единиц измерения

## Функциональность

### Загрузка данных
- Кнопка "Завантажити довідники" для синхронизации с сервером
- Автоматическое сохранение в локальную базу данных Room
- Отображение статуса загрузки и ошибок

### Просмотр данных
- Список всех активных единиц измерения
- Поиск по названию, коду или краткому названию
- Отображение информации о количестве записей и времени последней синхронизации

### Офлайн работа
- Данные сохраняются в локальной базе данных
- Работа без интернета после первоначальной загрузки
- Автоматическое обновление UI при изменении данных

## Использование

1. Войдите в приложение
2. Перейдите на вкладку "Одиниці виміру"
3. Нажмите "Завантажити довідники" для загрузки данных с сервера
4. Используйте поле поиска для фильтрации единиц измерения

## API эндпоинты

- `GET /api/v1/units/` - получение списка единиц измерения
- `GET /api/v1/units/{id}` - получение единицы измерения по ID
- `GET /api/v1/units/code/{code}` - получение единицы измерения по коду

## Структура данных

```json
{
  "id": 1,
  "code": "kg",
  "name": "Кілограм",
  "short_name": "кг",
  "description": "Основна одиниця виміру маси в системі СІ",
  "is_active": true,
  "created_at": "2025-10-12T17:57:42",
  "updated_at": null
}
```

## Технические детали

- Использует Room для локального хранения данных
- Retrofit для сетевых запросов
- StateFlow для реактивного обновления UI
- OAuth 2.0 для авторизации API запросов
- MVVM архитектура с Repository паттерном
